##############################
## GM1 character_memory_types
##############################
#------------------------------
# Rulers
#------------------------------

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_tier_neighbor_modifier
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_tier_modifier = {
	### This ruler is approving towards higher tier rulers.
	### Unless they're too bold to care.
	modifier = {
		$WHO$.highest_held_title_tier < $WITH$.highest_held_title_tier
		NOR = {
			$WHO$.liege = $WITH$
			$WITH$.liege = $WHO$
		}
		add = {
			value = 20
			multiply = {
				subtract = $WHO$.highest_held_title_tier
				min = 1
			}
			if = {
				limit = { $WHO$.ai_boldness >= very_high_positive_ai_value }
				multiply = 0
			}
		}
		desc = RANK_DIFFERENCE_REASON
	}
	### This ruler is dismissive towards lower tier rulers.
	modifier = {
		$WHO$.highest_held_title_tier > $WITH$.highest_held_title_tier
		NOR = {
			$WHO$.liege = $WITH$
			$WITH$.liege = $WHO$
		}
		add = {
			value = -20
			multiply = {
				value = $WHO$.highest_held_title_tier
				subtract = $WITH$.highest_held_title_tier
				min = 1
			}
		}
		desc = RANK_DIFFERENCE_REASON
	}
}

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_relative_strength_modifier
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_relative_strength_modifier = {
	### This ruler is the same strength toward that ruler.
	### This ruler is less likely to accept.
	modifier = {
		NOR = {
			$WHO$.interaction_current_strength_ninety_percent_value > $WITH$.current_military_strength
			$WHO$.current_military_strength < $WITH$.interaction_current_strength_ninety_percent_value
		}
		add = -10
		desc = INTERACTION_AI_REASON_SIMILAR_MILITARY_STRENGTH
	}
	### This ruler is more powerful than that ruler. 
	### This ruler is less likely to accept.
	modifier = {
		$WHO$.interaction_current_strength_ninety_percent_value > $WITH$.current_military_strength
		add = {
			value = $WHO$.current_military_strength 			# 1828
			divide = {
				value = $WITH$.current_military_strength 		# 1382
				min = 1
			}													# 1828 / 1382 = 1.32
			subtract = 1									 	# 1.32 - 1 = 0.32
			multiply = -50 										# 0.32 * 50 = -16
			max = 50
			min = -50
		}
		desc = INTERACTION_AI_REASON_RELATIVE_MILITARY_STRENGTH
	}
	### This ruler is less powerful than that ruler.
	### This ruler is more likely to accept.
	### Unless they are too bold to care.
	modifier = {
		$WHO$.current_military_strength < $WITH$.interaction_current_strength_ninety_percent_value
		add = {
			value = $WITH$.current_military_strength 			# 1828
			divide = {
				value = $WHO$.current_military_strength 		# 1382
				min = 1
			}													# 1828 / 1382 = 1.32
			subtract = 1 										# 1.32 - 1 = 0.32
			multiply = {
				value = 50										# 0.32 * 50 = 16
				if = {
					limit = { $WHO$.ai_boldness >= very_high_positive_ai_value }
					multiply = 0
				}
			}
			max = 50
			min = -50
		}
		desc = INTERACTION_AI_REASON_RELATIVE_MILITARY_STRENGTH
	}
	### This evaluates both the ruler's allies strength.
	### This ruler's alliance is more powerful than the that ruler's alliance.
	### This ruler is less likely to accept.
	### Unless they are too bold to care.
	modifier = {
		#### There needs to be at least any alliances.
		OR = {
			$WHO$ = { any_ally = { exists = this } }
			$WITH$ = { any_ally = { exists = this } }
		}
		#### There needs to be at least difference in strength.
		OR = {
			$WHO$.interaction_current_strength_with_allies_value >= $WITH$.interaction_current_strength_ninety_percent_value
			$WITH$.interaction_current_strength_with_allies_value >= $WHO$.interaction_current_strength_ninety_percent_value
		}
		add = {
			value = {
				value = 0
				$WHO$ = {
					every_ally = { add = current_military_strength } 		# 1828
				}
			}
			divide = {
				value = {
					value = 0
					$WITH$ = {
						every_ally = { add = current_military_strength } 	# 1382
					}
				}
				min = 1
			}																# 1828 / 1382 = 1.32
			subtract = 1 													# 1.32 - 1 = 0.32
			multiply = {
				value = -100												# 0.32 * 100 = -32
				if = {
					limit = { $WHO$.ai_boldness >= very_high_positive_ai_value }
					multiply = 0
				}
			}
			divide = 2 														# -32 / 2 = -16
			max = 25
			min = -25
		}
		desc = INTERACTION_AI_REASON_ALLY_MILITARY_STRENGTH
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction#ai_accept
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_government_modifier = {
	### This ruler is tribal while the other ruler is not.
	### This ruler is less likely to approve.
	modifier = {
		$WHO$ = { government_has_flag = government_is_tribal }
		$WITH$ = { NOT = { government_has_flag = government_is_tribal } }
		add = -20
		desc = INTERACTION_AI_REASON_GOVERNMENT
	}
	### This ruler is not tribal while the other ruler is.
	### This ruler is less likely to approve.
	modifier = {
		$WHO$ = { NOT = { government_has_flag = government_is_tribal } }
		$WITH$ = { government_has_flag = government_is_tribal }
		add = -20
		desc = INTERACTION_AI_REASON_GOVERNMENT
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction#ai_accept
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_realm_modifier = {
	### This ruler is agreeable towards their own allies.
	modifier = {
		$WHO$ = { is_allied_to = $WITH$ } 
		add = 20
		desc = INTERACTION_AI_REASON_ALLIED
	}
	### This ruler recently fought in a war against that ruler.
	modifier = {
		$WHO$ = { any_truce_holder = { $WITH$ = this } }	
		add = -50
		desc = INTERACTION_AI_REASON_RECENT_WAR
	}
	### This ruler fought in an independence war against that ruler.
	modifier = {
		$WHO$ = {
			exists = var:independence_war_former_liege
			var:independence_war_former_liege = $WITH$
		}
		add = {
			value = -50
			multiply = 4
		}
		desc = INTERACTION_AI_REASON_RECENT_INDEPENDECE_WAR
	}
}

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_culture_faith_modifier
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_culture_modifier = {
	### This ruler is non-agreeable towards different culture rulers.
	modifier = {
		$WHO$.culture = {
			NOT = { this = $WITH$.culture }
			cultural_acceptance = { target = $WITH$.culture value < 75 }
			cultural_acceptance = { target = $WITH$.culture value >= 50 }
		}
		add = -5
		desc = INTERACTION_AI_REASON_CULTURAL_ACCEPTANCE
	}
	modifier = {
		$WHO$.culture = {
			NOT = { this = $WITH$.culture }
			cultural_acceptance = { target = $WITH$.culture value < 50 }
			cultural_acceptance = { target = $WITH$.culture value >= 25 }
		}
		add = -5
		desc = INTERACTION_AI_REASON_CULTURAL_ACCEPTANCE
	}
	modifier = {
		$WHO$.culture = {
			NOT = { this = $WITH$.culture }
			cultural_acceptance = { target = $WITH$.culture value < 25 }
		}
		add = {
			value = -5
			multiply = 3
		}
		desc = INTERACTION_AI_REASON_CULTURAL_ACCEPTANCE
	}
}

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_culture_faith_modifier
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_faith_modifier = {
	### This ruler is non-agreeable towards different faith rulers.
	modifier = {
		$WHO$.faith = {
			NOT = { this = $WITH$.faith }
			faith_hostility_level = {
				target = $WITH$.faith
				value = faith_evil_level
			}
		}
		add = {
			value = -5
			multiply = 3
		}
		desc = INTERACTION_AI_REASON_FAITH_EVIL
	}
	modifier = {
		$WHO$.faith = {
			NOT = { this = $WITH$.faith }
			faith_hostility_level = {
				target = $WITH$.faith
				value = faith_hostile_level
			}
		}
		add = {
			value = -5
			multiply = 2
		}
		desc = INTERACTION_AI_REASON_FAITH_EVIL
	}
	modifier = {
		$WHO$.faith = {
			NOT = { this = $WITH$.faith }
			faith_hostility_level = {
				target = $WITH$.faith
				value = faith_astray_level
			}
		}
		add = -5
		desc = INTERACTION_AI_REASON_FAITH_ASTRAY
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_relation_modifier = {
	modifier = {
		$WHO$ = { has_relation_friend = $WITH$ }
		$WHO$ = { NOT = { has_relation_best_friend = $WITH$ } }
		add = 10
		desc = INTERACTION_AI_REASON_RELATION_FRIEND
	}
	modifier = {
		$WHO$ = { has_relation_best_friend = $WITH$ } 
		add = 20
		desc = INTERACTION_AI_REASON_RELATION_BEST_FRIEND
	}
	modifier = {
		$WHO$ = { has_relation_lover = $WITH$ }
		$WHO$ = { NOT = { has_relation_soulmate = $WITH$ } }
		add = 10
		desc = INTERACTION_AI_REASON_RELATION_LOVER
	}
	modifier = {
		$WHO$ = { has_relation_soulmate = $WITH$ } 
		add = 20
		desc = INTERACTION_AI_REASON_RELATION_SOULMATE
	}
	modifier = {
		$WHO$ = { has_relation_rival = $WITH$ }
		$WHO$ = { NOT = { has_relation_nemesis = $WITH$ } }
		add = -25
		desc = INTERACTION_AI_REASON_RELATION_RIVAL
	}
	modifier = {
		$WHO$ = { has_relation_nemesis = $WITH$ } 
		add = -50
		desc = INTERACTION_AI_REASON_RELATION_NEMESIS
	}
	modifier = {
		$WHO$ = { dynasty = $WITH$.dynasty } 
		add = 5
		desc = INTERACTION_AI_REASON_DYNASTY_SAME_DYNASTY
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_dread_modifier = {
	modifier = {
		$WHO$ = {
			has_dread_level_towards = {
				target = $WITH$
				level = 1
			}
		}
		add = intimidated_halved_reason_value
		desc = INTIMIDATED_REASON
	}
	modifier = {
		$WHO$ = {
			has_dread_level_towards = {
				target = $WITH$
				level = 2
			}
		}
		add = cowed_halved_reason_value
		desc = COWED_REASON
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
## WHO (character)
## WITH (character)
## PRISONER (character)
gm1_transfer_prisoner_interaction_perk_modifier = {
	### This ruler has the "True Ruler" perk.
	### This ruler is allowed to do anything with their own vassal prisoner.
	modifier = {
		$WHO$ = { has_perk = true_ruler_perk }
		OR = {
			$WITH$ = { is_vassal_of = $WHO$ }
			$PRISONER$ = { is_vassal_of = $WHO$ }
		}
		add = true_ruler_value
		desc = INTERACTION_TRUE_RULER_PERK
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
## WHO (character)
## WITH (character)
gm1_transfer_prisoner_interaction_trait_modifier = {
	### This ruler is more likely to accept with diplomatic rulers.
	modifier = {
		$WITH$ = { has_trait = education_diplomacy_5 }
		add = 25
		desc = INTERACTION_DIPLOMACY_EDUCATION
	}
	### This ruler is less likely to accept if paranoid.
	modifier = {
		$WHO$ = { has_trait = paranoid }
		add = -20
		desc = INTERACTION_PARANOID
	}
	### This ruler is more likely to accept if trusting.
	modifier = {
		$WHO$ = { has_trait = trusting }
		add = 5
		desc = INTERACTION_TRUSTING
	}
	### This ruler is more likely to accept if content.
	modifier = {
		$WHO$ = { has_trait = content }
		add = 5
		desc = INTERACTION_CONTENT
	}
	### This ruler is less likely to accept if arrogant.
	modifier = {
		$WHO$ = { has_trait = arrogant }
		add = -20
		desc = INTERACTION_ARROGANT
	}
	### This ruler is less likely to accept if fickle.
	modifier = {
		$WHO$ = { has_trait = fickle }
		add = -20
		desc = INTERACTION_FICKLE
	}
	### This ruler is less likely to accept if forgiving.
	modifier = {
		$WHO$ = { has_trait = forgiving }
		add = -20
		desc = INTERACTION_FORGIVING
	}
	### This ruler is more likely to accept if vengeful.
	modifier = {
		$WHO$ = { has_trait = vengeful }
		add = 5
		desc = INTERACTION_VENGEFUL
	}
}

#------------------------------
# PRISONER
#------------------------------

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_relative_strength_modifier
## WHO (character)
## PRISONER (character)
gm1_transfer_prisoner_interaction_prisoner_relative_strength_modifier = {
	### This ruler is the same strength toward the prisoner.
	### This ruler is okay with accepting.
	#modifier = {
	#	NOR = {
	#		$WHO$.interaction_current_strength_ninety_percent_value > $PRISONER$.current_military_strength
	#		$WHO$.current_military_strength < $PRISONER$.interaction_current_strength_ninety_percent_value
	#	}
	#	add = 10
	#	desc = INTERACTION_AI_REASON_PRISONER_MILITARY_STRENGTH
	#}
	### This ruler is more powerful than the prisoner.
	### This ruler is more likely to accept.
	#modifier = {
	#	$WHO$.interaction_current_strength_ninety_percent_value > $PRISONER$.current_military_strength
	#	add = {
	#		value = $WHO$.current_military_strength 			# 1828
	#		divide = {
	#			value = $PRISONER$.current_military_strength 	# 1382
	#			min = 1
	##		subtract = 1									 	# 1.32 - 1 = 0.32
	#		multiply = 50 										# 0.32 * 50 = 16
	#		max = 50
	#		min = -50
	#	}
	#	desc = INTERACTION_AI_REASON_PRISONER_MILITARY_STRENGTH
	#}
	### This ruler is less powerful than the prisoner.
	### This ruler is scared to accept.
	### Unless they are too bold to care.
	modifier = {
		$WHO$.current_military_strength < $PRISONER$.current_military_strength
		add = {
			value = $PRISONER$.current_military_strength 		# 1828
			divide = {
				value = $WHO$.current_military_strength 		# 1382
				min = 1
			}													# 1828 / 1382 = 1.32
			subtract = 1 										# 1.32 - 1 = 0.32
			multiply = {
				value = -50										# 0.32 * -50 = -16
				if = {
					limit = { $WHO$.ai_boldness >= very_high_positive_ai_value }
					multiply = 0
				}
			}
			max = 50
			min = -50
		}
		desc = INTERACTION_AI_REASON_PRISONER_MILITARY_STRENGTH
	}
	### This evaluates the ruler and prisoner's allies strength.
	### This ruler's alliance is more less than the prisoner's alliance.
	### This ruler is scared to accept.
	### Unless they are too bold to care.
	modifier = {
		#### There needs to be at least any alliances.
		OR = {
			$WHO$ = { any_ally = { exists = this } }
			$PRISONER$ = { any_ally = { exists = this } }
		}
		#### There needs to be at least difference in strength.
		OR = {
			$WHO$.interaction_current_strength_with_allies_value >= $PRISONER$.interaction_current_strength_ninety_percent_value
			$PRISONER$.interaction_current_strength_with_allies_value >= $WHO$.interaction_current_strength_ninety_percent_value
		}
		add = {
			value = {
				value = 0
				$PRISONER$ = {
					every_ally = { add = current_military_strength } 		# 1828
				}
			}
			divide = {
				value = {
					value = 0
					$WHO$ = {
						every_ally = { add = current_military_strength } 	# 1382
					}
				}
				min = 1
			}																# 1828 / 1382 = 1.32
			subtract = 1 													# 1.32 - 1 = 0.32
			multiply = {
				value = -100												# 0.32 * 100 = -32
				if = {
					limit = { $WHO$.ai_boldness >= very_high_positive_ai_value }
					multiply = 0
				}
			}
			divide = 2 														# -32 / 2 = -16
			max = 25
			min = -25
		}
		desc = INTERACTION_AI_REASON_PRISONER_MILITARY_STRENGTH
	}
}

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_claims_casus_bellis_modifier
## WHO (character)
## PRISONER (character)
gm1_transfer_prisoner_interaction_claims_casus_bellis_modifier_gain = {
	### This ruler has casus bellis on the prisoner.
	### This ruler is less likely to accept.
	modifier = {
		$WHO$ = { has_any_cb_on = $PRISONER$ }
		add = -15
		desc = INTERACTION_AI_REASON_PRISONER_CASUS_BELLI
	}
	### This ruler has any claims against this prisoner's title/s.
	### This ruler is more likely to accept
	modifier = {
		$PRISONER$ = {
			any_held_title = {
				tier >= tier_county 
				save_temporary_scope_as = title_temp
			}
		}
		$WHO$ = { has_claim_on = scope:title_temp }
		add = {
			value = 0
			$PRISONER$ = {
				every_held_title = {
					limit = {
						any_claimant = { this = $WHO$ }
						save_temporary_scope_as = title_temp
					}
					add = {
						value = 5
						#### The ruler's strong claims worth more for the ruler.
						if = {
							limit = { $WHO$ = { has_strong_claim_on = scope:title_temp } }
							multiply = 2
						}
						#### The ruler's higher title claims are worth more.
						multiply = {
							value = {
								value = tier
								add = 1
							}
						}
					}
				}
			}
		}
		desc = INTERACTION_AI_REASON_PRISONER_CLAIMS_TOWARDS
	}
	### The prisoner has any claims against this ruler's title/s.
	### This ruler is more likely to accept
	modifier = {
		$WHO$ = {
			any_held_title = {
				tier >= tier_county 
				save_temporary_scope_as = title_temp
			}
		}
		$PRISONER$ = { has_claim_on = scope:title_temp }
		add = {
			value = 0
			$WHO$ = {
				every_held_title = {
					limit = {
						any_claimant = { this = $PRISONER$ }
						save_temporary_scope_as = title_temp
					}
					add = {
						value = 5
						#### The prisoner's strong claims worth more for the ruler.
						if = {
							limit = { $PRISONER$ = { has_strong_claim_on = scope:title_temp } }
							multiply = 2
						}
						#### The prisoner's higher title claims are worth more.
						multiply = {
							value = {
								value = tier
								add = 1
							}
						}
					}
				}
			}
		}
		desc = INTERACTION_AI_REASON_PRISONER_CLAIMS_AGAINST
	}
}

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_claims_casus_bellis_modifier
## WHO (character)
## PRISONER (character)
gm1_transfer_prisoner_interaction_claims_casus_bellis_modifier_loss = {
	### This ruler has casus bellis on the prisoner.
	### This ruler is more likely to accept.
	#modifier = {
	#	$WHO$ = { has_any_cb_on = $PRISONER$ }
	#	add = 15
	#	desc = INTERACTION_AI_REASON_PRISONER_CASUS_BELLI
	#}
	### This ruler has any claims against this prisoner's title/s.
	### This ruler is more likely to accept
	modifier = {
		$PRISONER$ = {
			any_held_title = {
				tier >= tier_county 
				save_temporary_scope_as = title_temp
			}
		}
		$WHO$ = { has_claim_on = scope:title_temp }
		add = {
			value = 0
			$PRISONER$ = {
				every_held_title = {
					limit = {
						any_claimant = { this = $WHO$ }
						save_temporary_scope_as = title_temp
					}
					add = {
						value = -5
						#### The ruler's strong claims worth more for the ruler.
						if = {
							limit = { $WHO$ = { has_strong_claim_on = scope:title_temp } }
							multiply = 2
						}
						#### The ruler's higher title claims are worth more.
						multiply = {
							value = {
								value = tier
								add = -1
							}
						}
					}
				}
			}
		}
		desc = INTERACTION_AI_REASON_PRISONER_CLAIMS_TOWARDS
	}
	### The prisoner has any claims against this ruler's title/s.
	### This ruler is more likely to accept
	modifier = {
		$WHO$ = {
			any_held_title = {
				tier >= tier_county 
				save_temporary_scope_as = title_temp
			}
		}
		$PRISONER$ = { has_claim_on = scope:title_temp }
		add = {
			value = 0
			$WHO$ = {
				every_held_title = {
					limit = {
						any_claimant = { this = $PRISONER$ }
						save_temporary_scope_as = title_temp
					}
					add = {
						value = -5
						#### The prisoner's strong claims worth more for the ruler.
						if = {
							limit = { $PRISONER$ = { has_strong_claim_on = scope:title_temp } }
							multiply = 2
						}
						#### The prisoner's higher title claims are worth more.
						multiply = {
							value = {
								value = tier
								add = -1
							}
						}
					}
				}
			}
		}
		desc = INTERACTION_AI_REASON_PRISONER_CLAIMS_AGAINST
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
# based on ./common/scripted_modifiers/00_hostile_scheme_scripted_modifiers.txt/hostile_murder_agent_base_join_chance_modifier
## WHO (character)
## PRISONER (character)
gm1_transfer_prisoner_interaction_prisoner_faith_modifier = {
	modifier = {
		$WHO$.faith = {
			NOT = { this = $PRISONER$.faith }
			faith_hostility_level = {
				target = $PRISONER$.faith
				value = faith_evil_level
			}
		}
		add = {
			value = -5
			multiply = -3
		}
		desc = INTERACTION_AI_REASON_PRISONER_FAITH_EVIL
	}
	modifier = {
		$WHO$.faith = {
			NOT = { this = $PRISONER$.faith }
			faith_hostility_level = {
				target = $PRISONER$.faith
				value = faith_hostile_level
			}
		}
		add = {
			value = -5
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_FAITH_EVIL
	}
	modifier = {
		$WHO$.faith = {
			NOT = { this = $PRISONER$.faith }
			faith_hostility_level = {
				target = $PRISONER$.faith
				value = faith_astray_level
			}
		}
		add = {
			value = -5
			multiply = -1
		}
		desc = INTERACTION_AI_REASON_PRISONER_FAITH_ASTRAY
	}
	modifier = {
		$PRISONER$ = { is_head_of_faith_of = { WHO = $WHO$ } }
		add = {
			value = -500
			if = {
				limit = { $WHO$ = { has_imprisonment_reason = $PRISONER$ } }
				divide = 4
			}
			if = {
				limit = { $WHO$ = { has_trait = zealous } }
				multiply = 2
			}
			else_if = {
				limit = { $WHO$ = { has_trait = arbitrary } }
				multiply = 0
			}
		}
		desc = INTERACTION_AI_REASON_PRISONER_HEAD_OF_FAITH
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction#ai_accept
## WHO (character)
## PRISONER (character)
gm1_transfer_prisoner_interaction_prisoner_realm_modifier = {
	### That ruler is a vassal of this ruler.
	### This ruler, without any imprisonment claim, is less likely to accept.
	modifier = {
		$PRISONER$ = { is_vassal_of = $WHO$ }
		NOT = { $WHO$ = { has_imprisonment_reason = $PRISONER$ } }
		add = -30
		desc = INTERACTION_AI_REASON_PRISONER_VASSAL
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
## WHO (character)
## PRISONER (character)
gm1_offer_prisoner_interaction_prisoner_relation_modifier = {
	modifier = {
		$WHO$ = { has_relation_friend = $PRISONER$ }
		$WHO$ = { NOT = { has_relation_best_friend = $PRISONER$ } }
		add = {
			value = 10
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_FRIEND
	}
	modifier = {
		$WHO$ = { has_relation_best_friend = $PRISONER$ } 
		add = {
			value = 20
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_BEST_FRIEND
	}
	modifier = {
		$WHO$ = { has_relation_lover = $PRISONER$ }
		$WHO$ = { NOT = { has_relation_soulmate = $PRISONER$ } }
		add = {
			value = 10
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_LOVER
	}
	modifier = {
		$WHO$ = { has_relation_soulmate = $PRISONER$ } 
		add = {
			value = 20
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_SOULMATE
	}
	modifier = {
		$WHO$ = { has_relation_rival = $PRISONER$ }
		$WHO$ = { NOT = { has_relation_nemesis = $PRISONER$ } }
		add = {
			value = -25
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_RIVAL
	}
	modifier = {
		$WHO$ = { has_relation_nemesis = $PRISONER$ } 
		add = {
			value = -50
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_NEMESIS
	}
	modifier = {
		$WHO$ = { dynasty = $PRISONER$.dynasty } 
		add = {
			value = 5
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_DYNASTY_SAME_DYNASTY
	}
}

# based on ./common/character_interactions/00_character_interactions.txt/offer_vassalization_interaction/ai_accept
## WHO (character)
## PRISONER (character)
gm1_demand_prisoner_interaction_prisoner_relation_modifier = {
	modifier = {
		$WHO$ = { has_relation_friend = $PRISONER$ }
		$WHO$ = { NOT = { has_relation_best_friend = $PRISONER$ } }
		add = {
			value = 10
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_FRIEND
	}
	modifier = {
		$WHO$ = { has_relation_best_friend = $PRISONER$ } 
		add = {
			value = 20
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_BEST_FRIEND
	}
	modifier = {
		$WHO$ = { has_relation_lover = $PRISONER$ }
		$WHO$ = { NOT = { has_relation_soulmate = $PRISONER$ } }
		add = {
			value = 10
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_LOVER
	}
	modifier = {
		$WHO$ = { has_relation_soulmate = $PRISONER$ } 
		add = {
			value = 20
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_SOULMATE
	}
	modifier = {
		$WHO$ = { has_relation_rival = $PRISONER$ }
		$WHO$ = { NOT = { has_relation_nemesis = $PRISONER$ } }
		add = {
			value = -25
			multiply = 2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_RIVAL
	}
	modifier = {
		$WHO$ = { has_relation_nemesis = $PRISONER$ } 
		add = {
			value = -50
			multiply = 2
		}
		desc = INTERACTION_AI_REASON_PRISONER_RELATION_NEMESIS
	}
	modifier = {
		$WHO$ = { dynasty = $PRISONER$.dynasty } 
		add = {
			value = 5
			multiply = -2
		}
		desc = INTERACTION_AI_REASON_PRISONER_DYNASTY_SAME_DYNASTY
	}
}

#------------------------------
# Personality
#------------------------------

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_offer_personality_modifier
## WHO (character)
## WITH (character)
## PRISONER (character)
gm1_offer_prisoner_interaction_personality_modifier = {
	## Cowardly characters are less willing to take prisoners
	modifier = {
		$WHO$.ai_boldness < 0
		add = {
			value = $WHO$.ai_boldness
			multiply = -0.5
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_BOLDNESS
	}
	## Compassionate characters are less willing to take prisoners
	modifier = {
		$WHO$.ai_compassion > 0
		add = {
			value = $WHO$.ai_compassion
			multiply = -0.5
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_COMPASSION
	}
	## Greedy characters are more willing to take, but not bargain prisoners
	modifier = { 
		$WHO$.ai_greed != 0
		add = {
			value = $WHO$.ai_greed
			if = {
				limit = { 
					$WHO$ = {
						OR = {
							ai_greed < 0
							scope:gold = yes
							scope:exploitive_gold = yes
							scope:extortionate_gold = yes
							scope:exploitive_extortionate_gold = yes
						}
					}
				}
				multiply = -0.5
			}
			else = { multiply = 0.5 }
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_GREED
	}
	## Honorable characters are less willing to take prisoners, dishonorable only when to take them
	modifier = {
		$WHO$.ai_honor != 0
		add = {
			value = $WHO$.ai_honor
			if = {
				limit = { $WHO$.ai_honor < 0 }
				multiply = 0.5
			}
			else = {
				multiply = -0.5
				if = {
					limit = {
						$WHO$ = { is_vassal_of = $WITH$ }
						$WITH$ = { has_realm_law_flag = vassal_refusal_is_treason }
					}
					multiply = 2
				}
			}
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_HONOR
	}
	## Rational characters are more willing to take hostages
	modifier = {
		$WHO$.ai_rationality > 0
		add = {
			value = $WHO$.ai_rationality
			multiply = 0.5
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_RATIONALITY
	}
	## Zealous characters are more willing to take prisoners with hostile/evil faiths
	modifier = {
		$WHO$.ai_zeal != 0
		$WHO$.faith ?= {
			faith_hostility_level = { target = $PRISONER$.faith value >= faith_hostile_level }
		}
		add = {
			value = $WHO$.ai_zeal
			multiply = 0.5
			if = {
				limit = {
					$WHO$.faith ?= {
						faith_hostility_level = { target = $PRISONER$.faith value >= faith_evil_level }
					}
				}
				multiply = 2
			}
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_ZEAL
	}
	## Crown authority makes it even more dishonorable
	modifier = { 
		$WHO$.ai_honor > 0
		$WHO$ = { is_vassal_of = $WITH$ }
		$WITH$ = { has_realm_law_flag = vassal_refusal_is_treason }
		add = {
			value = $WHO$.ai_honor
			multiply = -0.5
		}
		desc = INTERACTION_AI_REASON_REALM_LAW
	}
}

# based on ./common/scripted_modifiers/05_bp2_scripted_modifiers.txt/bp2_hostage_demand_personality_modifier
## WHO (character)
## WITH (character)
## PRISONER (character)
gm1_demand_prisoner_interaction_personality_modifier = {
	## Cowardly characters are less willing to give prisoners
	modifier = {
		$WHO$.ai_boldness < 0
		add = {
			value = $WITH$.ai_boldness
			multiply = -0.5
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_BOLDNESS
	}
	## Compassionate characters are less willing to take prisoners
	modifier = {
		$WHO$.ai_compassion > 0
		add = {
			value = $WHO$.ai_compassion
			multiply = -0.5
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_COMPASSION
	}
	## Greedy characters are more willing to bargain, but not give prisoners
	modifier = { 
		$WHO$.ai_greed != 0
		add = {
			value = $WHO$.ai_greed
			if = {
				limit = { 
					$WHO$ = {
						OR = {
							ai_greed > 0
							scope:gold = yes
							scope:exploitive_gold = yes
							scope:extortionate_gold = yes
							scope:exploitive_extortionate_gold = yes
						}
					}
				}
				multiply = 0.5
			}
			else = { multiply = -0.5 }
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_GREED
	}
	## Honorable characters are less willing to give prisoners, dishonorable only when to take them
	modifier = {
		$WHO$.ai_honor != 0
		add = {
			value = $WHO$.ai_honor
			if = {
				limit = { $WHO$.ai_honor < 0 }
				multiply = 0.5
			}
			else = {
				multiply = -0.5
				if = {
					limit = {
						$WHO$ = { is_vassal_of = $WITH$ }
						$WITH$ = { has_realm_law_flag = vassal_refusal_is_treason }
					}
					multiply = 2
				}
			}
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_HONOR
	}
	## Rational characters are less willing to give hostages
	modifier = {
		$WHO$.ai_rationality > 0
		add = {
			value = $WHO$.ai_rationality
			multiply = -0.5
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_RATIONALITY
	}
	## Zealous characters are less willing to give prisoners with hostile/evil faiths
	modifier = {
		$WHO$.ai_zeal != 0
		$WHO$.faith ?= {
			faith_hostility_level = { target = $PRISONER$.faith value >= faith_hostile_level }
		}
		add = {
			value = $WHO$.ai_zeal
			multiply = -0.5
			if = {
				limit = {
					$WHO$.faith ?= {
						faith_hostility_level = { target = $PRISONER$.faith value >= faith_evil_level }
					}
				}
				multiply = 2
			}
		}
		desc = INTERACTION_AI_VALUE_MODIFIER_ZEAL
	}
	## Crown authority makes it even more dishonorable
	modifier = { 
		$WHO$.ai_honor > 0
		$WHO$ = { is_vassal_of = $WITH$ }
		$PRISONER$ = { has_realm_law_flag = vassal_refusal_is_treason }
		add = {
			value = $WHO$.ai_honor
			multiply = -0.5
		}
		desc = INTERACTION_AI_REASON_REALM_LAW
	}
}