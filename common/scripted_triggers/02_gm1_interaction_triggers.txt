##############################
## GM1 scripted_triggers
##############################
#------------------------------
# interaction-related
#------------------------------

# ROOT (character)
# SENDER (character)
gm1_valid_for_transfer_prisoner_interaction_trigger_basic = {
	is_imprisoned = yes
	is_imprisoned_by = $SENDER$
	cannot_release_former_regent_whilst_old_regent_holds_power_trigger = {
		PRISONER = this
		REGENT = this.var:imprisoned_by_diarch
	}
}

# ROOT (character)
gm1_valid_for_transfer_prisoner_interaction_trigger = {
	## Mod - Prisoner of War
	is_under_ongoing_interaction = no
	is_being_tortured = no
	health > dying_health
}

gm1_valid_for_transfer_prisoner_interaction_action_shared_trigger = {
	NOT = { is_allied_to = root }
}

gm1_valid_for_transfer_prisoner_interaction_offer_action_trigger = {
	gm1_valid_for_transfer_prisoner_interaction_action_shared_trigger = yes

	root = {
		any_prisoner = {
			count >= 1
			gm1_valid_for_transfer_prisoner_interaction_trigger_basic = { 
				SENDER = $SENDER$
				RECEIVER = $RECEIVER$
			}
			save_temporary_scope_as = prisoner
		}
		is_character_interaction_potentially_accepted = {
			interaction = offer_prisoner_interaction
			recipient = $RECEIVER$
			secondary_actor = scope:prisoner
		}
	}
}